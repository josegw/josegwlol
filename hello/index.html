<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Experiment – tribie2</title>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="Experiment" />
<style>
html, body {
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #0a0a0a, #111);
    color: white;
    font-family: 'Helvetica Neue', sans-serif;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
}
.hidden {
    display: none;
}
.top-section {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    width: 100%;
    margin-top: 40px;
}
.top-section img {
    width: 120px;
    height: 120px;
    border-radius: 16px;
    cursor: pointer;
}
.top-section h1 {
    font-size: 1.8rem;
    margin: 10px 0 0 0;
}
.top-section p {
    font-size: 1rem;
    color: #aaa;
    margin: 4px 0 0 0;
}
.input-section {
    margin-top: 40px;
    width: 90%;
    max-width: 400px;
    display: flex;
    flex-direction: column;
    align-items: center;
}
.input-section input[type="text"] {
    width: 100%;
    padding: 14px;
    background: transparent;
    border: 1px solid #555;
    border-radius: 8px;
    color: white;
    font-size: 1rem;
    margin-bottom: 12px;
    text-align: center;
}
.input-section button {
    width: 100%;
    padding: 14px;
    border: none;
    border-radius: 8px;
    background: #6a00ff;
    color: white;
    font-size: 1rem;
    cursor: pointer;
}
#mensajeClave {
    margin-top: 10px;
    color: #ccc;
    font-size: 0.9rem;
    text-align: center;
    padding: 0 20px;
}
#resultado {
    margin-top: 12px;
    font-size: 1rem;
    min-height: 1.2em;
    text-align: center;
}
</style>
</head>
<body>
<div id="mainContent" class="hidden">
    <div class="top-section">
        <img src="IMG_2379.tiff" alt="Experiment" id="experimentImage">
        <h1>Experiment</h1>
        <p>tribie2</p>
    </div>

    <div class="input-section">
        <input type="text" id="claveInput" placeholder="Enter Key">
        <button onclick="verificarClave()">Validate Key</button>
        <div id="mensajeClave">Para conseguir la clave, presiona la foto.</div>
        <div id="resultado"></div>
    </div>
</div>

<script>
if (window.navigator.standalone) {
    document.getElementById('mainContent').classList.remove('hidden');
}

document.getElementById('experimentImage').addEventListener('click', function() {
    window.location.href = 'https://www.roblox.com/es/games/98262951659977/Experiment'; // <-- Coloca aquí el link de tu juego
});

async function verificarClave() {
    const clave = document.getElementById('claveInput').value.trim();
    const resultado = document.getElementById('resultado');

    if (!clave) {
        resultado.innerText = "Por favor, introduce una clave.";
        resultado.style.color = "orange";
        return;
    }

    try {
        const res = await fetch("https://josegwlol-backend.onrender.com/api/verificar-clave", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ clave })
        });

        const data = await res.json();

        if (res.ok && data.valida) {
            let count = 3;
            resultado.style.color = "lightgreen";
            const countdown = setInterval(() => {
                resultado.innerText = `✅ Clave válida. Redirigiendo en ${count}...`;
                count--;
                if (count < 0) {
                    clearInterval(countdown);
                    window.location = "extra.html";
                }
            }, 1000);
        } else {
            resultado.innerText = "❌ Clave inválida o ya utilizada.";
            resultado.style.color = "tomato";
        }
    } catch (err) {
        resultado.innerText = "❌ Error al verificar la clave.";
        resultado.style.color = "orange";
        console.error(err);
    }
}
</script>
</body>
</html>
